(function(){"use strict";var g="function"==typeof Array.prototype.indexOf,i=Object.prototype.hasOwnProperty;function a(t){var e,r,n,o,a=Array.prototype.slice.call(arguments,1);for(e=0,r=a.length;e<r;e+=1)if(n=a[e])for(o in n)i.call(n,o)&&(t[o]=n[o]);return t}function y(t,e,r,n){if(!e||!i.call(e,r)){var o=new Error("A value must be provided for: "+(n||r));throw o.variableId=n||r,o.variableType=t?"function":"value",o}}function s(t,e){return g?-1!==t.indexOf(e):v(t,e)}function v(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return!0;return!1}var t=function(){try{return!!Object.defineProperty({},"a",{})}catch(t){return!1}}(),u=(!t&&Object.prototype.__defineGetter__,t?Object.defineProperty:function(t,e,r){"get"in r&&t.__defineGetter__?t.__defineGetter__(e,r.get):(!i.call(t,e)||"value"in r)&&(t[e]=r.value)}),l=Object.create||function(t,e){var r,n;function o(){}for(n in o.prototype=t,r=new o,e)i.call(e,n)&&u(r,n,e[n]);return r},n=Array.isArray||function(t){return"[object Array]"===toString.call(t)};function o(t){return new e(t)}function e(t){this.id=t}e.prototype.format=function(t){return t||"number"==typeof t?this.formatValue(t):""},e.prototype.formatValue=function(t){return"string"==typeof t?t:String(t)};var c=r;function r(t,e,r,n){this.locales=t,this.formats=e,this.pluralFn=r,this.requireOther=!n||"boolean"!=typeof n.requireOther||n.requireOther,this.stringFormatFactory=n&&n.stringFormatFactory||o}function p(t,e,r,n,o){this.id=t,this.useOrdinal=e,this.offset=r,this.options=n,this.pluralFn=o}function f(t,e,r,n){this.id=t,this.offset=e,this.numberFormat=r,this.string=n}function h(t,e){this.id=t,this.options=e}function m(t,e){this.id=t,this.pattern=e}function d(){}function b(){this._elements=[]}function F(){return new w}function w(){this._str=""}r.prototype.compile=function(t){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.tagNames=[],this.argIds=[],this.compileMessage(t)},r.prototype.compileMessage=function(t){if(!t||"messageFormatPattern"!==t.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var e,r,n,o=t.elements,a=[];for(e=0,r=o.length;e<r;e+=1)switch((n=o[e]).type){case"messageTextElement":a.push(this.compileMessageText(n));break;case"argumentElement":a.push(this.compileArgument(n));break;case"selfClosingTagElement":a.push(this.compileSelfClosingTag(n));break;case"tagElement":a.push(this.compileTag(n));break;default:throw new Error("Message element does not have a valid type")}return a},r.prototype.compileMessageText=function(t){return this.currentPlural&&/(^|[^\\])#/g.test(t.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new f(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,t.value)):t.value.replace(/\\#/g,"#")},r.prototype.compileArgument=function(t){if(s(this.tagNames,t.id))throw new Error('Message has conflicting argument and tag name "'+t.id+'".');this.argIds.push(t.id);var e=t.format;if(!e)return this.stringFormatFactory(t.id);var r,n=this.formats,o=this.locales,a=this.pluralFn;switch(e.type){case"numberFormat":return r=n.number[e.style],{id:t.id,format:new Intl.NumberFormat(o,r).format};case"dateFormat":return r=n.date[e.style],{id:t.id,format:new Intl.DateTimeFormat(o,r).format};case"timeFormat":return r=n.time[e.style],{id:t.id,format:new Intl.DateTimeFormat(o,r).format};case"pluralFormat":return r=this.compileOptions(t),new p(t.id,e.ordinal,e.offset,r,a);case"selectFormat":return r=this.compileOptions(t),new h(t.id,r);default:throw new Error("Message element does not have a valid format type")}},r.prototype.compileOptions=function(t){var e,r,n,o=t.format,a=o.options,i={};if(!0===this.requireOther&&!t.hasOther)throw new Error(o.type+" requires an `other` option, this can be disabled.");for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===o.type?t:null,e=0,r=a.length;e<r;e+=1)i[(n=a[e]).selector]=this.compileMessage(n.value);return this.currentPlural=this.pluralStack.pop(),i},r.prototype.createTag=function(t,e){if(s(this.argIds,t.name))throw new Error('Message has conflicting argument and tag name "'+t.name+'".');return this.tagNames.push(t.name),new m(t.name,e)},r.prototype.compileTag=function(t){return this.createTag(t,this.compileMessage(t.value))},r.prototype.compileSelfClosingTag=function(t){return this.createTag(t)},p.prototype.getOption=function(t){var e=this.options;return e["="+t]||e[this.pluralFn(t-this.offset,this.useOrdinal)]||e.other||[]},f.prototype.format=function(t){var e=this.numberFormat.format(t-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+e).replace(/\\#/g,"#")},h.prototype.getOption=function(t){var e=this.options;return e[t]||e.other||[]},m.prototype.format=function(t,e){if("function"!=typeof t)throw new Error("tag values require a function");return void 0===this.pattern?t():t(e)},d.prototype.message=function(){},d.prototype.formatted=function(t){return t},b.prototype.append=function(t){if(null!=t)if(n(t))if(Array.prototype.push.apply)Array.prototype.push.apply(this._elements,t);else for(var e=0,r=t.length;e<r;e++)this._elements.push(t);else this._elements.push(t)},b.prototype.appendText=function(t){return this.append(t)},b.prototype.appendSimpleMessage=function(t){return this.append(t)},b.prototype.appendFormattedMessage=function(t){return this.append(t)},b.prototype.appendTag=function(t){return this.append(t)},b.prototype.build=function(){return this._elements},w.prototype.append=function(t){this._str+=t||""},w.prototype.appendText=function(t){return this.append(t)},w.prototype.appendSimpleMessage=function(t){return this.append(t)},w.prototype.appendFormattedMessage=function(t){return this.append(t)},w.prototype.appendTag=function(t){return this.append(t)},w.prototype.build=function(){return this._str};var _=function(){function le(t,e,r,n){this.message=t,this.expected=e,this.found=r,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,le)}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(le,Error),{SyntaxError:le,parse:function(z){var t,e=1<arguments.length?arguments[1]:{},G={},r={start:Kt},n=Kt,o=function(t){return{type:"messageFormatPattern",elements:t,location:Ut()}},V=function(t){var e,r,n,o,a,i="";for(e=0,n=t.length;e<n;e+=1)for(r=0,a=(o=t[e]).length;r<a;r+=1)i+=o[r];return i},U=function(t){return{type:"messageTextElement",value:t,location:Ut()}},W=function(t,e,r){if(t.name!=r.name)throw new Error("Expected </x:"+t.name+"> but </x:"+r.name+"> found.");return{type:"tagElement",name:t.name,value:e}},$="<x:",H={type:"literal",value:"<x:",description:'"<x:"'},J=">",K={type:"literal",value:">",description:'">"'},Q=function(t){return{name:t}},X="</x:",Y={type:"literal",value:"</x:",description:'"</x:"'},tt="/>",et={type:"literal",value:"/>",description:'"/>"'},rt=function(t){return{type:"selfClosingTagElement",name:t}},i=/^[_a-zA-Z0-9]/,s={type:"class",value:"[_a-zA-Z0-9]",description:"[_a-zA-Z0-9]"},u=/^[._a-zA-Z0-9]/,l={type:"class",value:"[._a-zA-Z0-9]",description:"[._a-zA-Z0-9]"},c=function(t){if("."===t[t.length-1])throw new Error('tag name "<x:'+t+'>" can not end in "."');return t},nt=/^[^ \t\n\r,.+={}#]/,ot={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},at=/^[^ \t\n\r,+={}#]/,it={type:"class",value:"[^ \\t\\n\\r,+={}#]",description:"[^ \\t\\n\\r,+={}#]"},st=function(t){if("."===t[t.length-1])throw new Error('argument id "'+t+'" can not end in "."');return t},ut="{",lt={type:"literal",value:"{",description:'"{"'},ct=",",pt={type:"literal",value:",",description:'","'},ft="}",ht={type:"literal",value:"}",description:'"}"'},mt=function(t,e){var r=e&&e[2];return{type:"argumentElement",id:t,hasOther:!(!r||"boolean"!=typeof r.hasOther)&&r.hasOther,format:r&&r.format,location:Ut()}},dt=function(t){if(void 0===t.options)return{format:t};for(var e=!1,r=t.options,n=0,o=r.length;n<o;n++)if("optionalFormatPattern"===r[n].type&&"other"===r[n].selector){e=!0;break}return{format:t,hasOther:e}},gt="number",yt={type:"literal",value:"number",description:'"number"'},vt="date",bt={type:"literal",value:"date",description:'"date"'},Ft="time",wt={type:"literal",value:"time",description:'"time"'},_t=function(t,e){return{type:t+"Format",style:e&&e[2],location:Ut()}},At="plural",xt={type:"literal",value:"plural",description:'"plural"'},Ct=function(t){return{type:t.type,ordinal:!1,offset:t.offset||0,options:t.options,location:Ut()}},Et="selectordinal",Tt={type:"literal",value:"selectordinal",description:'"selectordinal"'},Ot=function(t){return{type:t.type,ordinal:!0,offset:t.offset||0,options:t.options,location:Ut()}},Mt="select",St={type:"literal",value:"select",description:'"select"'},Pt=function(t){return{type:"selectFormat",options:t,location:Ut()}},p="=",f={type:"literal",value:"=",description:'"="'},h=function(t,e){return{type:"optionalFormatPattern",selector:t,value:e,location:Ut()}},m="offset:",d={type:"literal",value:"offset:",description:'"offset:"'},g=function(t){return t},y=function(t,e){return{type:"pluralFormat",offset:t,options:e,location:Ut()}},a={type:"other",description:"whitespace"},v=/^[ \t\n\r]/,b={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},F={type:"other",description:"optionalWhitespace"},w=/^[0-9]/,_={type:"class",value:"[0-9]",description:"[0-9]"},A=/^[0-9a-f]/i,x={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},C="0",E={type:"literal",value:"0",description:'"0"'},T=/^[1-9]/,O={type:"class",value:"[1-9]",description:"[1-9]"},M=function(t){return parseInt(t,10)},S=/^[^{}\\\0-\x1F \t\n\r]/,P={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},R=function(t){return t},L="\\\\",N={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},I=function(){return"\\"},k="\\#",j={type:"literal",value:"\\#",description:'"\\\\#"'},B=function(){return"\\#"},D="\\{",Z={type:"literal",value:"\\{",description:'"\\\\{"'},q=function(){return"{"},Rt="\\}",Lt={type:"literal",value:"\\}",description:'"\\\\}"'},Nt=function(){return"}"},It="\\u",kt={type:"literal",value:"\\u",description:'"\\\\u"'},jt=function(t){return String.fromCharCode(parseInt(t,16))},Bt=function(t){return t.join("")},Dt=0,Zt=0,qt=[{line:1,column:1,seenCR:!1}],zt=0,Gt=[],Vt=0;if("startRule"in e){if(!(e.startRule in r))throw new Error("Can't start parsing from rule \""+e.startRule+'".');n=r[e.startRule]}function Ut(){return $t(Zt,Dt)}function Wt(t){var e,r,n=qt[t];if(n)return n;for(e=t-1;!qt[e];)e--;for(n={line:(n=qt[e]).line,column:n.column,seenCR:n.seenCR};e<t;)"\n"===(r=z.charAt(e))?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1),e++;return qt[t]=n}function $t(t,e){var r=Wt(t),n=Wt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Ht(t){Dt<zt||(zt<Dt&&(zt=Dt,Gt=[]),Gt.push(t))}function Jt(t,e,r,n){return null!==e&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(e),new le(null!==t?t:function(t,e){var r,n=new Array(t.length);for(r=0;r<t.length;r++)n[r]=t[r].description;return"Expected "+(1<t.length?n.slice(0,-1).join(", ")+" or "+n[t.length-1]:n[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(e,r),e,r,n)}function Kt(){return Qt()}function Qt(){var t,e,r;for(t=Dt,e=[],r=Xt();r!==G;)e.push(r),r=Xt();return e!==G&&(Zt=t,e=o(e)),t=e}function Xt(){var t,e,r,n,o,a,i,s,u,l,c,p,f,h,m,d,g,y,v,b,F,w,_,A,x,C,E,T,O,M,S,P,R,L,N,I,k,j,B,D,Z,q;return B=S=Dt,z.substr(Dt,3)===$?(D=$,Dt+=3):(D=G,0===Vt&&Ht(H)),D!==G&&(Z=Yt())!==G?(62===z.charCodeAt(Dt)?(q=J,Dt++):(q=G,0===Vt&&Ht(K)),q!==G?(Zt=B,D=Q(Z),B=D):(Dt=B,B=G)):(Dt=B,B=G),(P=B)!==G&&(R=Qt())!==G&&(N=Dt,z.substr(Dt,4)===X?(I=X,Dt+=4):(I=G,0===Vt&&Ht(Y)),I!==G&&(k=Yt())!==G?(62===z.charCodeAt(Dt)?(j=J,Dt++):(j=G,0===Vt&&Ht(K)),j!==G?(Zt=N,I=Q(k),N=I):(Dt=N,N=G)):(Dt=N,N=G),(L=N)!==G)?(Zt=S,P=W(P,R,L),S=P):(Dt=S,S=G),(t=S)===G&&(E=Dt,z.substr(Dt,3)===$?(T=$,Dt+=3):(T=G,0===Vt&&Ht(H)),T!==G&&(O=Yt())!==G&&ne()!==G?(z.substr(Dt,2)===tt?(M=tt,Dt+=2):(M=G,0===Vt&&Ht(et)),M!==G?(Zt=E,T=rt(O),E=T):(Dt=E,E=G)):(Dt=E,E=G),(t=E)===G)&&(x=Dt,(C=function(){var t,e,r,n,o,a;if(e=[],r=t=Dt,(n=ne())!==G&&(o=ue())!==G&&(a=ne())!==G?r=n=[n,o,a]:(Dt=r,r=G),r!==G)for(;r!==G;)e.push(r),r=Dt,(n=ne())!==G&&(o=ue())!==G&&(a=ne())!==G?r=n=[n,o,a]:(Dt=r,r=G);else e=G;return e!==G&&(Zt=t,e=V(e)),(t=e)===G&&(t=Dt,e=re(),t=e!==G?z.substring(t,Dt):e),t}())!==G&&(Zt=x,C=U(C)),(t=x=C)===G)&&(e=Dt,123===z.charCodeAt(Dt)?(r=ut,Dt++):(r=G,0===Vt&&Ht(lt)),r!==G&&ne()!==G&&(n=function(){var t,e,r,n,o,a;if(t=Dt,(e=ie())===G){if(r=e=Dt,nt.test(z.charAt(Dt))?(n=z.charAt(Dt),Dt++):(n=G,0===Vt&&Ht(ot)),n!==G){for(o=[],at.test(z.charAt(Dt))?(a=z.charAt(Dt),Dt++):(a=G,0===Vt&&Ht(it));a!==G;)o.push(a),at.test(z.charAt(Dt))?(a=z.charAt(Dt),Dt++):(a=G,0===Vt&&Ht(it));o!==G?r=n=[n,o]:(Dt=r,r=G)}else Dt=r,r=G;e=r!==G?z.substring(e,Dt):r}return e!==G&&(Zt=t,e=st(e)),t=e}())!==G&&ne()!==G?(o=Dt,44===z.charCodeAt(Dt)?(a=ct,Dt++):(a=G,0===Vt&&Ht(pt)),a!==G&&(i=ne())!==G&&(v=u=Dt,z.substr(Dt,6)===gt?(b=gt,Dt+=6):(b=G,0===Vt&&Ht(yt)),b===G&&(z.substr(Dt,4)===vt?(b=vt,Dt+=4):(b=G,0===Vt&&Ht(bt)),b===G&&(z.substr(Dt,4)===Ft?(b=Ft,Dt+=4):(b=G,0===Vt&&Ht(wt)))),b!==G&&ne()!==G?(F=Dt,44===z.charCodeAt(Dt)?(w=ct,Dt++):(w=G,0===Vt&&Ht(pt)),w!==G&&(_=ne())!==G&&(A=ue())!==G?F=w=[w,_,A]:(Dt=F,F=G),F===G&&(F=null),F!==G?(Zt=v,b=_t(b,F),v=b):(Dt=v,v=G)):(Dt=v,v=G),(l=v)===G&&(m=Dt,z.substr(Dt,6)===At?(d=At,Dt+=6):(d=G,0===Vt&&Ht(xt)),d!==G&&ne()!==G?(44===z.charCodeAt(Dt)?(g=ct,Dt++):(g=G,0===Vt&&Ht(pt)),g!==G&&ne()!==G&&(y=ee())!==G?(Zt=m,d=Ct(y),m=d):(Dt=m,m=G)):(Dt=m,m=G),(l=m)===G)&&(c=Dt,z.substr(Dt,13)===Et?(p=Et,Dt+=13):(p=G,0===Vt&&Ht(Tt)),p!==G&&ne()!==G?(44===z.charCodeAt(Dt)?(f=ct,Dt++):(f=G,0===Vt&&Ht(pt)),f!==G&&ne()!==G&&(h=ee())!==G?(Zt=c,p=Ot(h),c=p):(Dt=c,c=G)):(Dt=c,c=G),(l=c)===G)&&(l=function(){var t,e,r,n,o;if(t=Dt,z.substr(Dt,6)===Mt?(e=Mt,Dt+=6):(e=G,0===Vt&&Ht(St)),e!==G)if(ne()!==G)if(44===z.charCodeAt(Dt)?(r=ct,Dt++):(r=G,0===Vt&&Ht(pt)),r!==G)if(ne()!==G){if(n=[],(o=te())!==G)for(;o!==G;)n.push(o),o=te();else n=G;n!==G?(Zt=t,e=Pt(n),t=e):(Dt=t,t=G)}else Dt=t,t=G;else Dt=t,t=G;else Dt=t,t=G;else Dt=t,t=G;return t}()),l!==G&&(Zt=u,l=dt(l)),(s=u=l)!==G)?o=a=[a,i,s]:(Dt=o,o=G),o===G&&(o=null),o!==G&&(a=ne())!==G?(125===z.charCodeAt(Dt)?(i=ft,Dt++):(i=G,0===Vt&&Ht(ht)),i!==G?(Zt=e,r=mt(n,o),e=r):(Dt=e,e=G)):(Dt=e,e=G)):(Dt=e,e=G),t=e),t}function Yt(){var t,e,r,n,o,a;if(r=e=t=Dt,i.test(z.charAt(Dt))?(n=z.charAt(Dt),Dt++):(n=G,0===Vt&&Ht(s)),n!==G){for(o=[],u.test(z.charAt(Dt))?(a=z.charAt(Dt),Dt++):(a=G,0===Vt&&Ht(l));a!==G;)o.push(a),u.test(z.charAt(Dt))?(a=z.charAt(Dt),Dt++):(a=G,0===Vt&&Ht(l));o!==G?r=n=[n,o]:(Dt=r,r=G)}else Dt=r,r=G;return(e=r!==G?z.substring(e,Dt):r)!==G&&(Zt=t,e=c(e)),t=e}function te(){var t,e,r,n,o,a,i,s,u;return t=Dt,ne()!==G?(i=a=Dt,61===z.charCodeAt(Dt)?(s=p,Dt++):(s=G,0===Vt&&Ht(f)),s!==G&&(u=ie())!==G?i=s=[s,u]:(Dt=i,i=G),(a=i!==G?z.substring(a,Dt):i)===G&&(a=ue()),(e=a)!==G&&ne()!==G?(123===z.charCodeAt(Dt)?(r=ut,Dt++):(r=G,0===Vt&&Ht(lt)),r!==G&&(n=Qt())!==G?(125===z.charCodeAt(Dt)?(o=ft,Dt++):(o=G,0===Vt&&Ht(ht)),o!==G?(Zt=t,t=h(e,n)):(Dt=t,t=G)):(Dt=t,t=G)):(Dt=t,t=G)):(Dt=t,t=G),t}function ee(){var t,e,r,n,o,a,i;if(o=t=Dt,z.substr(Dt,7)===m?(a=m,Dt+=7):(a=G,0===Vt&&Ht(d)),a!==G&&ne()!==G&&(i=ie())!==G?(Zt=o,o=a=g(i)):(Dt=o,o=G),(e=o)===G&&(e=null),e!==G)if(ne()!==G){if(r=[],(n=te())!==G)for(;n!==G;)r.push(n),n=te();else r=G;r!==G?(Zt=t,t=e=y(e,r)):(Dt=t,t=G)}else Dt=t,t=G;else Dt=t,t=G;return t}function re(){var t,e;if(Vt++,t=[],v.test(z.charAt(Dt))?(e=z.charAt(Dt),Dt++):(e=G,0===Vt&&Ht(b)),e!==G)for(;e!==G;)t.push(e),v.test(z.charAt(Dt))?(e=z.charAt(Dt),Dt++):(e=G,0===Vt&&Ht(b));else t=G;return Vt--,t===G&&(e=G,0===Vt&&Ht(a)),t}function ne(){var t,e,r;for(Vt++,t=Dt,e=[],r=re();r!==G;)e.push(r),r=re();return t=e!==G?z.substring(t,Dt):e,Vt--,t===G&&(e=G,0===Vt&&Ht(F)),t}function oe(){var t;return w.test(z.charAt(Dt))?(t=z.charAt(Dt),Dt++):(t=G,0===Vt&&Ht(_)),t}function ae(){var t;return A.test(z.charAt(Dt))?(t=z.charAt(Dt),Dt++):(t=G,0===Vt&&Ht(x)),t}function ie(){var t,e,r,n,o,a;if(t=Dt,48===z.charCodeAt(Dt)?(e=C,Dt++):(e=G,0===Vt&&Ht(E)),e===G){if(r=e=Dt,T.test(z.charAt(Dt))?(n=z.charAt(Dt),Dt++):(n=G,0===Vt&&Ht(O)),n!==G){for(o=[],a=oe();a!==G;)o.push(a),a=oe();o!==G?r=n=[n,o]:(Dt=r,r=G)}else Dt=r,r=G;e=r!==G?z.substring(e,Dt):r}return e!==G&&(Zt=t,e=M(e)),t=e}function se(){var t,e,r,n,o,a,i,s;return e=t=Dt,Vt++,z.substr(Dt,3)===$?(r=$,Dt+=3):(r=G,0===Vt&&Ht(H)),r===G&&(z.substr(Dt,4)===X?(r=X,Dt+=4):(r=G,0===Vt&&Ht(Y))),Vt--,r===G?e=void 0:(Dt=e,e=G),e!==G?(S.test(z.charAt(Dt))?(r=z.charAt(Dt),Dt++):(r=G,0===Vt&&Ht(P)),r!==G?(Zt=t,t=e=R(r)):(Dt=t,t=G)):(Dt=t,t=G),t===G&&(t=Dt,z.substr(Dt,2)===L?(e=L,Dt+=2):(e=G,0===Vt&&Ht(N)),e!==G&&(Zt=t,e=I()),(t=e)===G&&(t=Dt,z.substr(Dt,2)===k?(e=k,Dt+=2):(e=G,0===Vt&&Ht(j)),e!==G&&(Zt=t,e=B()),(t=e)===G&&(t=Dt,z.substr(Dt,2)===D?(e=D,Dt+=2):(e=G,0===Vt&&Ht(Z)),e!==G&&(Zt=t,e=q()),(t=e)===G&&(t=Dt,z.substr(Dt,2)===Rt?(e=Rt,Dt+=2):(e=G,0===Vt&&Ht(Lt)),e!==G&&(Zt=t,e=Nt()),(t=e)===G&&(t=Dt,z.substr(Dt,2)===It?(e=It,Dt+=2):(e=G,0===Vt&&Ht(kt)),e!==G?(n=r=Dt,(o=ae())!==G&&(a=ae())!==G&&(i=ae())!==G&&(s=ae())!==G?n=o=[o,a,i,s]:(Dt=n,n=G),(r=n!==G?z.substring(r,Dt):n)!==G?(Zt=t,t=e=jt(r)):(Dt=t,t=G)):(Dt=t,t=G)))))),t}function ue(){var t,e,r;if(t=Dt,e=[],(r=se())!==G)for(;r!==G;)e.push(r),r=se();else e=G;return e!==G&&(Zt=t,e=Bt(e)),t=e}if((t=n())!==G&&Dt===z.length)return t;throw t!==G&&Dt<z.length&&Ht({type:"end",description:"end of input"}),Jt(null,Gt,zt<z.length?z.charAt(zt):null,zt<z.length?$t(zt,zt+1):$t(zt,zt))}}}(),A=x;function x(o,t,e,r){var n="string"==typeof o?x.__parse(o):o;if(!n||"messageFormatPattern"!==n.type)throw new TypeError("A message must be provided as a String or AST.");e=this._mergeFormats(x.formats,e),u(this,"_locale",{value:this._resolveLocale(t)});var a=this._findPluralRuleFunction(this._locale),i=this._compilePattern(n,t,e,a,r),s=this;this.format=function(t,e){var r=(e=e||{}).messageBuilderFactory||F,n=e.messageBuilderContext||new d;if(e.messageBuilderFactory&&"function"!=typeof r)throw new Error("Message `format` option `messageBuilderFactory` requires a function.");try{return n.message(o),n.formatted(s._format(i,t,n,r))}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' "+t.variableType+" was not provided to the string '"+o+"'"):t}}}u(x,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),u(x,"__localeData__",{value:l(null)}),u(x,"__addLocaleData",{value:function(t){if(!t||!t.locale)throw new Error("Locale data provided to TagMessageFormat is missing a `locale` property");x.__localeData__[t.locale.toLowerCase()]=t}}),u(x,"__parse",{value:_.parse}),u(x,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),x.prototype.resolvedOptions=function(){return{locale:this._locale}},x.prototype._compilePattern=function(t,e,r,n,o){return new c(e,r,n,o).compile(t)},x.prototype._findPluralRuleFunction=function(t){for(var e=x.__localeData__,r=e[t.toLowerCase()];r;){if(r.pluralRuleFunction)return r.pluralRuleFunction;r=r.parentLocale&&e[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to TagMessageFormat is missing a `pluralRuleFunction` for :"+t)},x.prototype._format=function(t,e,r,n){var o,a,i,s,u,l,c,p=n(r);for(o=0,a=t.length;o<a;o+=1)if("string"!=typeof(i=t[o])){if(s=i.id,c=".","string"==typeof(l=s)&&(g?-1!==l.indexOf(c):v(l.split(""),c))){var f,h=s.split(".");u=e;for(var m=0,d=h.length;m<d;m++)f=h[m],y(!!i.pattern,u,f,s),u=u[f]}else y(!!i.pattern,e,s),u=e[s];i.options?p.appendFormattedMessage(this._format(i.getOption(u),e,r,n),s):i.pattern?p.appendTag(i.format(u,this._format(i.pattern,e,r,n)),s):p.appendSimpleMessage(i.format(u),s)}else p.appendText(i);return p.build()},x.prototype._mergeFormats=function(t,e){var r,n,o={};for(r in t)i.call(t,r)&&(o[r]=n=l(t[r]),e&&i.call(e,r)&&a(n,e[r]));return o},x.prototype._resolveLocale=function(t){"string"==typeof t&&(t=[t]),t=(t||[]).concat(x.defaultLocale);var e,r,n,o,a=x.__localeData__;for(e=0,r=t.length;e<r;e+=1)for(n=t[e].toLowerCase().split("-");n.length;){if(o=a[n.join("-")])return o.locale;n.pop()}var i=t.pop();throw new Error("No locale data has been added to TagMessageFormat for: "+t.join(", ")+", or the default locale: "+i)};var C={locale:"en",pluralRuleFunction:function(t,e){var r=String(t).split("."),n=!r[1],o=Number(r[0])==t,a=o&&r[0].slice(-1),i=o&&r[0].slice(-2);return e?1==a&&11!=i?"one":2==a&&12!=i?"two":3==a&&13!=i?"few":"other":1==t&&n?"one":"other"}};A.__addLocaleData(C),A.defaultLocale="en";var E=A;u(E,"stringBuilderFactory",{value:F}),u(E,"arrayBuilderFactory",{value:function(){return new b}}),u(E,"stringFormatFactory",{value:o}),u(E,"StringFormat",{value:e}),u(E,"BuilderContext",{value:d});var T=E;this.TagMessageFormat=T}).call(this);
//# sourceMappingURL=tag-messageformat.min.js.map